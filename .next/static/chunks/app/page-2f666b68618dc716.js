(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1477:function(e,t,r){Promise.resolve().then(r.bind(r,132))},132:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),n=r(2265),a=r(4033),l=r(8222),i=r(9102),o=r.n(i),c=r(1396),d=r.n(c),u=r(1291),m=r(7158),h=r(7438),f=r(2169);function g(e){let{title:t,games:r,categorySlug:a,icon:l}=e,[i,c]=(0,n.useState)(0),[g,x]=(0,n.useState)(!1),p=()=>window.innerWidth>=1024?6:window.innerWidth>=768?4:2,[b,j]=(0,n.useState)(6),v=Math.ceil(r.length/b);n.useEffect(()=>{j(p());let e=()=>{j(p()),c(0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let y=r.slice(i*b,(i+1)*b),N=e=>{e===i||g||(x(!0),setTimeout(()=>{c(e),setTimeout(()=>x(!1),50)},150))};return r&&0!==r.length?(0,s.jsxs)("section",{className:"jsx-f8b472ca13077104 category-section mb-2 pl-2 pr-1 group",children:[(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 flex items-center justify-between mb-1",children:(0,s.jsxs)("div",{className:"jsx-f8b472ca13077104 flex items-center gap-3",children:[(0,s.jsx)("h2",{className:"jsx-f8b472ca13077104 text-lg font-bold",children:t}),a&&(0,s.jsx)(d(),{href:"/?category=".concat(encodeURIComponent(t)),className:"text-xs text-muted-foreground hover:text-primary transition-colors duration-200",children:"T\xfcm\xfcn\xfc G\xf6r"})]})}),(0,s.jsxs)("div",{className:"jsx-f8b472ca13077104 relative",children:[i>0&&(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 absolute left-0 top-0 bottom-0 w-12 z-20 opacity-0 group-hover:opacity-50 hover:!opacity-100 transition-opacity duration-300",children:(0,s.jsx)("button",{onClick:()=>{i>0&&!g&&(x(!0),setTimeout(()=>{c(i-1),setTimeout(()=>x(!1),50)},150))},className:"jsx-f8b472ca13077104 scroll-nav-button w-full h-full bg-background/50 border-r border-border hover:bg-background/80 flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"h-5 w-5"})})}),i<v-1&&(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 absolute right-0 top-0 bottom-0 w-12 z-20 opacity-0 group-hover:opacity-50 hover:!opacity-100 transition-opacity duration-300",children:(0,s.jsx)("button",{onClick:()=>{i<v-1&&!g&&(x(!0),setTimeout(()=>{c(i+1),setTimeout(()=>x(!1),50)},150))},className:"jsx-f8b472ca13077104 scroll-nav-button w-full h-full bg-background/50 border-l border-border hover:bg-background/80 flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"h-5 w-5"})})}),(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-1",children:y.map(e=>(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 w-full",children:(0,s.jsx)(h.y,{id:e.id,title:e.title,imageUrl:e.thumbnail,category:[e.category],aspectRatio:"video",className:"h-full"})},e.id))}),v>1&&(0,s.jsx)("div",{className:"jsx-f8b472ca13077104 flex justify-center mt-1 gap-1",children:Array.from({length:v}).map((e,t)=>(0,s.jsx)("button",{onClick:()=>N(t),className:"jsx-f8b472ca13077104 "+((0,f.cn)("w-1.5 h-1.5 rounded-full transition-all duration-200",t===i?"bg-primary scale-125":"bg-muted-foreground/30 hover:bg-muted-foreground/50")||"")},t))})]}),(0,s.jsx)(o(),{id:"f8b472ca13077104",children:".scrollbar-hide.jsx-f8b472ca13077104{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide.jsx-f8b472ca13077104::-webkit-scrollbar{display:none}"})]}):null}var x=r(7312);function p(){let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(1),[m,h]=(0,n.useState)(!0),[f,p]=(0,n.useState)(0),b=(0,a.useSearchParams)().get("category"),j=(0,n.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{1===e&&i(!0);let s=b?100:1e3,n=await (0,l.kT)(s,e,b||void 0);console.log("API response:",n);let a=[];if(n.games&&Array.isArray(n.games))a=n.games,n.total&&p(n.total);else if(Array.isArray(n))a=n;else{console.error("Unexpected API response format:",n),c("API yanıt formatı beklenmedik şekilde");return}a.length<s&&h(!1),r?t(e=>[...e,...a]):t(a)}catch(e){console.error("Error loading games:",e),c("Oyunlar y\xfcklenirken bir hata oluştu: "+(e.message||String(e)))}finally{i(!1)}},[b]),v=(0,n.useCallback)(()=>{if(r||!m)return;let e=d+1;u(e),j(e,!0)},[r,m,d,j]);(0,n.useEffect)(()=>{u(1),h(!0),j(1,!1)},[b,j]);let y=e.map(e=>({id:e.id||e._id||e.Id||"",title:e.title||e.Title||"İsimsiz Oyun",thumbnail:e.thumbnail||e.Assets&&e.Assets[0]||"https://via.placeholder.com/300x200",category:e.category||e.Genres&&e.Genres[0]||"Genel"}));if(o)return(0,s.jsx)("div",{className:"container mx-auto text-center py-10 text-red-500",children:o});if(b)return(0,s.jsxs)("div",{className:"container mx-auto py-2 pl-2 pr-1",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold mb-2 pl-2",children:[b.charAt(0).toUpperCase()+b.slice(1)," Kategorisi",(0,s.jsx)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:f>0?"(".concat(f," oyun)"):"(".concat(y.length," oyun)")})]}),(0,s.jsx)(x.Z,{games:y,loading:r,hasMore:m,onLoadMore:v})]});if(r&&0===y.length)return(0,s.jsx)("div",{className:"container mx-auto py-2 pl-2 pr-1",children:(0,s.jsx)("div",{className:"text-center py-10",children:"Oyunlar y\xfckleniyor..."})});let N=Object.entries(y.reduce((e,t)=>{let r=t.category;return e[r]||(e[r]=[]),e[r].length<50&&e[r].push(t),e},{})).sort((e,t)=>{let[,r]=e,[,s]=t;return s.length-r.length}).filter(e=>{let[,t]=e;return t.length>0});return(0,s.jsx)("div",{className:"container mx-auto py-2 pl-2 pr-1",children:0===y.length?(0,s.jsx)("div",{className:"text-center py-10",children:(0,s.jsx)("p",{children:"Hi\xe7 oyun bulunamadı. Veritabanı bağlantısını kontrol edin."})}):(0,s.jsx)("div",{className:"space-y-2",children:N.map(e=>{let[t,r]=e;return(0,s.jsx)(g,{title:t,games:r,categorySlug:t.toLowerCase().replace(/\s+/g,"-"),icon:"\uD83C\uDFAE"},t)})})})}},7438:function(e,t,r){"use strict";r.d(t,{y:function(){return d}});var s=r(7437),n=r(1396),a=r.n(n),l=r(6691),i=r.n(l),o=r(2169),c=r(2265);function d(e){let{id:t,title:r,imageUrl:n,category:l,className:d,aspectRatio:u="square",width:m,height:h}=e,[f,g]=(0,c.useState)(!1);return(0,s.jsx)("div",{className:(0,o.cn)("relative overflow-hidden rounded-sm",d),children:(0,s.jsx)(a(),{href:"/game/".concat(t),className:"block h-full w-full hover-card",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:(0,o.cn)("overflow-hidden rounded-sm",{"aspect-square":"square"===u,"aspect-[3/4]":"portrait"===u,"aspect-video":"video"===u}),children:(0,s.jsx)(i(),{src:f?"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=300&fit=crop&auto=format&q=80":n,alt:r,width:m||300,height:h||300,className:"object-cover",onError:()=>g(!0),unoptimized:!0})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-1",children:(0,s.jsx)("div",{children:(0,s.jsx)("h3",{className:"font-medium text-white line-clamp-2 text-xs",children:r})})})]})})})}},7312:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(7437),n=r(2265),a=r(7438);function l(e){let{games:t,loading:r=!1,hasMore:l=!1,onLoadMore:i}=e,[o,c]=(0,n.useState)(r),d=(0,n.useRef)(null),u=(0,n.useRef)(null),m=(0,n.useCallback)(e=>{!r&&(d.current&&d.current.disconnect(),d.current=new IntersectionObserver(e=>{e[0].isIntersecting&&l&&i&&i()},{rootMargin:"100px"}),e&&d.current.observe(e))},[r,l,i]);return((0,n.useEffect)(()=>()=>{d.current&&d.current.disconnect()},[]),(0,n.useEffect)(()=>{!r&&o&&c(!1)},[r]),o)?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-1 pl-2 pr-0 py-1",children:Array.from({length:12}).map((e,t)=>(0,s.jsx)("div",{className:"aspect-video bg-muted rounded-md animate-pulse"},t))}):t&&0!==t.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-1 pl-2 pr-0 py-1",children:t.map((e,r)=>(0,s.jsx)("div",{ref:r===t.length-1?m:void 0,children:(0,s.jsx)(a.y,{id:e.id,title:e.title,imageUrl:e.thumbnail,category:[e.category],aspectRatio:"video",className:"h-full w-full transition-transform hover:scale-[1.02] duration-200"})},e.id))}),r&&!o&&(0,s.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),(0,s.jsx)("div",{ref:u,className:"h-1 w-full"})]}):(0,s.jsx)("div",{className:"text-center py-10",children:(0,s.jsx)("p",{children:"Bu kategoride oyun bulunamadı."})})}},8222:function(e,t,r){"use strict";async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;try{let n="/api/games?limit=".concat(e,"&page=").concat(t);r&&"all"!==r&&(n+="&category=".concat(encodeURIComponent(r))),s&&(n+="&search=".concat(encodeURIComponent(s)));let a=await fetch(n);if(!a.ok){let e=await a.json();throw Error(e.error||"API isteği başarısız")}let l=await a.json();return console.log("API response data:",l),l}catch(e){throw console.error("fetchGames error:",e),e}}r.d(t,{kT:function(){return s}})},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(7042),n=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[895,250,360,860,971,938,744],function(){return e(e.s=1477)}),_N_E=e.O()}]);